# Phase 3 Oracle Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PROJECT HYPERION - PHASE 3                        â”‚
â”‚                    "The Truth Validator" - Oracle Logic                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   REAL WORLD EVENT   â”‚
â”‚   ğŸŒªï¸  Hurricane      â”‚
â”‚   Wind: 35 m/s       â”‚
â”‚   Location: Miami    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Weather API (OpenWeatherMap, NOAA, etc.)
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PYTHON BACKEND (Off-Chain)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¡ Phase3OracleClient                                                   â”‚
â”‚  â”œâ”€ monitor_weather_realtime()      [Poll every 30s]                    â”‚
â”‚  â”œâ”€ build_canonical_message()       [Format: HYPERION_ORACLE_V1|...]    â”‚
â”‚  â”œâ”€ sign_oracle_data()              [Ed25519 signature]                 â”‚
â”‚  â””â”€ trigger_oracle()                [Build & submit transaction]        â”‚
â”‚                                                                           â”‚
â”‚  ğŸŒ FastAPI Endpoints                                                    â”‚
â”‚  â”œâ”€ POST /api/v1/oracle/initialize                                      â”‚
â”‚  â”œâ”€ POST /api/v1/oracle/trigger                                         â”‚
â”‚  â”œâ”€ POST /api/v1/oracle/monitor/start                                   â”‚
â”‚  â””â”€ GET  /api/v1/oracle/monitor/status                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Build Transaction
                       â”‚ + Ed25519 Signature (64 bytes)
                       â”‚ + Phase3OracleRedeemer
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CARDANO BLOCKCHAIN (On-Chain)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PHASE 3 ORACLE VALIDATOR (phase3_oracle.ak)                      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  INPUT: Oracle UTxO                                                â”‚ â”‚
â”‚  â”‚  â”œâ”€ Datum: Phase3OracleDatum                                      â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ oracle_vk: ByteArray (32 bytes)                           â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ threshold_wind_speed: 2500 (25.0 m/s Ã— 100)               â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ max_age_ms: 3600000 (1 hour)                              â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ last_nonce: 42                                            â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€ location_id: "MIAMI_FL"                                   â”‚ â”‚
â”‚  â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ Redeemer: Phase3OracleRedeemer                                â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ wind_speed: 3500 (35.0 m/s Ã— 100) âœ… > threshold         â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ measurement_time: 1700000000000                           â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ nonce: 43 âœ… > last_nonce                                 â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ policy_id: 0xabcd...1234 (28 bytes)                      â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ location_id: "MIAMI_FL" âœ… matches                        â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€ signature: 0x1a2b...9f (64 bytes)                        â”‚ â”‚
â”‚  â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ â”‚
â”‚  â”‚  â•‘  VALIDATION CHECKS (All Must Pass)                           â•‘ â”‚ â”‚
â”‚  â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚ â”‚
â”‚  â”‚  â•‘  âœ… CHECK 1: Ed25519 Signature Verification                  â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      builtin.verify_ed25519_signature(oracle_vk, msg, sig)   â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                                                               â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  âœ… CHECK 2: Location Binding                                â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      location_id == datum.location_id                        â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                                                               â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  âœ… CHECK 3: Parametric Condition (CODE IS LAW!)             â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      wind_speed >= threshold_wind_speed                      â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      3500 >= 2500 âœ… TRUE â†’ PAYOUT TRIGGERED                 â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                                                               â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  âœ… CHECK 4: Data Freshness                                  â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      age_ms <= max_age_ms                                    â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                                                               â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  âœ… CHECK 5: Replay Protection                               â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      nonce > last_nonce                                      â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      43 > 42 âœ… TRUE                                          â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                                                               â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  âœ… CHECK 6: State Continuation                              â•‘ â”‚ â”‚
â”‚  â”‚  â•‘      Updated datum with nonce = 43                           â•‘ â”‚ â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚  OUTPUT: Continuing Oracle UTxO                                    â”‚ â”‚
â”‚  â”‚  â””â”€ Updated Datum: last_nonce = 43 âœ…                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  INSURANCE VALIDATOR (insurance.ak)                               â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  TriggerPayout { oracle_redeemer }                                â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚  âœ… expect phase3_oracle_triggered(oracle_ref, ctx)               â”‚ â”‚
â”‚  â”‚  âœ… expect phase3_verify_policy(oracle_redeemer, policy_id)       â”‚ â”‚
â”‚  â”‚  âœ… let wind_speed = phase3_get_wind_speed(oracle_redeemer)       â”‚ â”‚
â”‚  â”‚  âœ… expect wind_speed >= policy.trigger_threshold                 â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚  â†’ PAYOUT AUTHORIZED âœ…                                            â”‚ â”‚
â”‚  â”‚  â†’ Transfer coverage_amount to policy holder                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Transaction Confirmed
                       â”‚ (avg. 20 seconds)
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            RESULT                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Oracle triggered successfully                                        â”‚
â”‚  âœ… Nonce incremented (42 â†’ 43)                                          â”‚
â”‚  âœ… Insurance payout authorized                                          â”‚
â”‚  âœ… Funds transferred to policyholder                                    â”‚
â”‚  âœ… Total latency: ~45 seconds (polling + blockchain)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
Weather Event â†’ API Poll â†’ Python Client â†’ Ed25519 Sign â†’ Cardano TX
                 (30s)      (< 1s)         (< 0.1s)        (~20s)
                                                             â†“
                                                      Oracle Validator
                                                             â†“
                                                      6 Security Checks
                                                             â†“
                                                      Insurance Validator
                                                             â†“
                                                      PAYOUT AUTHORIZED
```

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: Cryptographic Signatures                         â”‚
â”‚  â””â”€ Ed25519 (256-bit security)                             â”‚
â”‚     â””â”€ Public key hardcoded in datum                       â”‚
â”‚        â””â”€ Off-chain signing with secure HSM/enclave        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: Replay Protection                                â”‚
â”‚  â””â”€ Monotonic nonces (strictly increasing)                 â”‚
â”‚     â””â”€ Prevents signature reuse attacks                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 3: Data Freshness                                   â”‚
â”‚  â””â”€ Timestamp validation                                   â”‚
â”‚     â””â”€ Max age enforcement (1 hour default)                â”‚
â”‚        â””â”€ Prevents stale data exploitation                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 4: Location Binding                                 â”‚
â”‚  â””â”€ Geographic constraint enforcement                      â”‚
â”‚     â””â”€ Prevents cross-region oracle reuse                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 5: Parametric Logic                                 â”‚
â”‚  â””â”€ On-chain threshold enforcement                         â”‚
â”‚     â””â”€ "Code is Law" - immutable business rules            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 6: State Continuity                                 â”‚
â”‚  â””â”€ Continuing output verification                         â”‚
â”‚     â””â”€ Ensures proper state updates (nonce increment)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 3 EXPORTS (for other phases to use)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  phase3_oracle_triggered(oracle_ref, ctx) -> Bool         â”‚
â”‚  phase3_get_wind_speed(redeemer) -> Int                   â”‚
â”‚  phase3_get_timestamp(redeemer) -> Int                    â”‚
â”‚  phase3_verify_policy(redeemer, policy_id) -> Bool        â”‚
â”‚  phase3_extract_datum(datum_opt) -> Phase3OracleDatum     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 4     â”‚    â”‚  Phase 5     â”‚    â”‚  Future      â”‚
â”‚  Payout      â”‚    â”‚  Risk        â”‚    â”‚  Phases      â”‚
â”‚  Validator   â”‚    â”‚  Scoring     â”‚    â”‚  4-12        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Metrics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EVENT DETECTION                                            â”‚
â”‚  â””â”€ Polling interval: 30 seconds (configurable)            â”‚
â”‚     â””â”€ API request latency: < 1 second                     â”‚
â”‚        â””â”€ Wind speed extraction: < 0.01 second             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SIGNATURE GENERATION                                       â”‚
â”‚  â””â”€ Message formatting: < 0.1 second                       â”‚
â”‚     â””â”€ Ed25519 signing: < 0.05 second                      â”‚
â”‚        â””â”€ Total off-chain: < 1 second                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TRANSACTION BUILDING                                       â”‚
â”‚  â””â”€ PyCardano construction: < 0.5 second                   â”‚
â”‚     â””â”€ CBOR serialization: < 0.1 second                    â”‚
â”‚        â””â”€ Transaction submission: < 0.5 second             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ON-CHAIN VALIDATION                                        â”‚
â”‚  â””â”€ Ed25519 verification: < 0.1 second                     â”‚
â”‚     â””â”€ Parametric checks: < 0.01 second                    â”‚
â”‚        â””â”€ State updates: < 0.01 second                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BLOCKCHAIN CONFIRMATION                                    â”‚
â”‚  â””â”€ Mempool wait: 0-10 seconds                             â”‚
â”‚     â””â”€ Block inclusion: ~20 seconds (Cardano avg)          â”‚
â”‚        â””â”€ Finality: 1 block (Ouroboros Praos)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TOTAL END-TO-END LATENCY                                  â”‚
â”‚  â””â”€ Target: < 60 seconds                                   â”‚
â”‚     â””â”€ Typical: 35-50 seconds                              â”‚
â”‚        â””â”€ Production: âœ… Real-time compliant               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Dependencies

```
phase3_oracle.ak
  â””â”€ Imports: aiken/builtin, aiken/bytearray, aiken/list, etc.
  â””â”€ Exports: 5 integration functions

insurance.ak
  â””â”€ Imports: phase3_oracle functions
  â””â”€ Uses: oracle_triggered, get_wind_speed, verify_policy

phase3_oracle_client.py
  â””â”€ Imports: pycardano, PyNaCl, cbor2
  â””â”€ Exports: Phase3OracleClient class

oracle.py (FastAPI)
  â””â”€ Imports: phase3_oracle_client
  â””â”€ Exposes: REST API endpoints
```

---

**Phase 3 Oracle: Cryptographically Proving Real-World Events On-Chain**
